<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./style.css" />
    <title>Document</title>
  </head>
  <body>
    <div id="app">
      <span style="display:inline-block;vertical-align: middle;" @click="reset">
        <label class="rocker rocker-small" style="margin: 0">
          <input type="checkbox" v-model="onlyTap" />
          <span class="switch-left">Tap</span>
          <span class="switch-right">Wait</span>
        </label>
      </span>
      <span v-if="!onlyTap">
        <label>Typed</label>
        <input v-bind:value="typedBtns.join(' + ')" type="text" />
        <!-- <button @click="exec">Submit</button> -->
        <button @click="reset">Reset</button>
      </span>

      <div id="keyboard">
        <ul class="cf">
          <li @click="tap('esc')">
            <a class="key c27 fn"><span id="esc">esc</span></a>
          </li>
          <li @click="tap('f1')">
            <a class="key c112 fn"><span>F1</span></a>
          </li>
          <li @click="tap('f2')">
            <a class="key c113 fn"><span>F2</span></a>
          </li>
          <li @click="tap('f3')">
            <a class="key c114 fn"><span>F3</span></a>
          </li>
          <li @click="tap('f4')">
            <a class="key c115 fn"><span>F4</span></a>
          </li>
          <li @click="tap('f5')">
            <a class="key c116 fn"><span>F5</span></a>
          </li>
          <li @click="tap('f6')">
            <a class="key c117 fn"><span>F6</span></a>
          </li>
          <li @click="tap('f7')">
            <a class="key c118 fn"><span>F7</span></a>
          </li>
          <li @click="tap('f8')">
            <a class="key c119 fn"><span>F8</span></a>
          </li>
          <li @click="tap('f9')">
            <a class="key c120 fn"><span>F9</span></a>
          </li>
          <li @click="tap('f10')">
            <a class="key c121 fn"><span>F10</span></a>
          </li>
          <li @click="tap('f11')">
            <a class="key c122 fn"><span>F11</span></a>
          </li>
          <li @click="tap('f12')">
            <a class="key c123 fn"><span>F12</span></a>
          </li>
          <li @click="tap('delete')">
            <a class="key fn"><span>delete</span></a>
          </li>
        </ul>
        <ul class="cf" id="numbers">
          <li @click="tap('`')">
            <a class="key c192"><b>~</b><span>`</span></a>
          </li>
          <li @click="tap('1')">
            <a class="key c49"><b>!</b><span>1</span></a>
          </li>
          <li @click="tap('2')">
            <a class="key c50"><b>@</b><span>2</span></a>
          </li>
          <li @click="tap('3')">
            <a class="key c51"><b>#</b><span>3</span></a>
          </li>
          <li @click="tap('4')">
            <a class="key c52"><b>$</b><span>4</span></a>
          </li>
          <li @click="tap('5')">
            <a class="key c53"><b>%</b><span>5</span></a>
          </li>
          <li @click="tap('6')">
            <a class="key c54"><b>^</b><span>6</span></a>
          </li>
          <li @click="tap('7')">
            <a class="key c55"><b>&amp;</b><span>7</span></a>
          </li>
          <li @click="tap('8')">
            <a class="key c56"><b>*</b><span>8</span></a>
          </li>
          <li @click="tap('9')">
            <a class="key c57"><b>(</b><span>9</span></a>
          </li>
          <li @click="tap('0')">
            <a class="key c48"><b>)</b><span>0</span></a>
          </li>
          <li @click="tap('-')">
            <a class="key c189 alt"><b>_</b><span>-</span></a>
          </li>
          <li @click="tap('+')">
            <a class="key c187"><b>+</b><span>=</span></a>
          </li>
          <li @click="tap('backspace')">
            <a class="key c46" id="delete"><span>backspace</span></a>
          </li>
        </ul>
        <ul class="cf" id="qwerty">
          <li @click="tap('tab')">
            <a class="key c9" id="tab"><span>tab</span></a>
          </li>
          <li @click="tap('q')">
            <a class="key c81"><span>q</span></a>
          </li>
          <li @click="tap('w')">
            <a class="key c87"><span>w</span></a>
          </li>
          <li @click="tap('e')">
            <a class="key c69"><span>e</span></a>
          </li>
          <li @click="tap('r')">
            <a class="key c82"><span>r</span></a>
          </li>
          <li @click="tap('t')">
            <a class="key c84"><span>t</span></a>
          </li>
          <li @click="tap('y')">
            <a class="key c89"><span>y</span></a>
          </li>
          <li @click="tap('u')">
            <a class="key c85"><span>u</span></a>
          </li>
          <li @click="tap('i')">
            <a class="key c73"><span>i</span></a>
          </li>
          <li @click="tap('o')">
            <a class="key c79"><span>o</span></a>
          </li>
          <li @click="tap('p')">
            <a class="key c80"><span>p</span></a>
          </li>
          <li @click="tap('[')">
            <a class="key c219 alt"><b>{</b><span>[</span></a>
          </li>
          <li @click="tap(']')">
            <a class="key c221 alt"><b>}</b><span>]</span></a>
          </li>
          <li @click="tap('|')">
            <a class="key c220 alt"><b>|</b><span>\</span></a>
          </li>
        </ul>
        <ul class="cf" id="asdfg">
          <li @click="tap('caps_lock')">
            <a class="key c20 alt" id="caps"><b></b><span>caps lock</span></a>
          </li>
          <li @click="tap('a')">
            <a class="key c65"><span>a</span></a>
          </li>
          <li @click="tap('s')">
            <a class="key c83"><span>s</span></a>
          </li>
          <li @click="tap('d')">
            <a class="key c68"><span>d</span></a>
          </li>
          <li @click="tap('f')">
            <a class="key c70"><span>f</span></a>
          </li>
          <li @click="tap('g')">
            <a class="key c71"><span>g</span></a>
          </li>
          <li @click="tap('h')">
            <a class="key c72"><span>h</span></a>
          </li>
          <li @click="tap('j')">
            <a class="key c74"><span>j</span></a>
          </li>
          <li @click="tap('k')">
            <a class="key c75"><span>k</span></a>
          </li>
          <li @click="tap('l')">
            <a class="key c76"><span>l</span></a>
          </li>
          <li @click="tap(':')">
            <a class="key c186 alt"><b>:</b><span>;</span></a>
          </li>
          <li @click="tap('\'')">
            <a class="key c222 alt"><b>"</b><span>'</span></a>
          </li>
          <li @click="enterOnClick">
            <a class="key c13 alt" id="enter"><span>enter</span></a>
          </li>
        </ul>
        <ul class="cf" id="zxcvb">
          <li @click="tap('shift')">
            <a class="key c16 shiftleft"><span>shift</span></a>
          </li>
          <li @click="tap('z')">
            <a class="key c90"><span>z</span></a>
          </li>
          <li @click="tap('x')">
            <a class="key c88"><span>x</span></a>
          </li>
          <li @click="tap('c')">
            <a class="key c67"><span>c</span></a>
          </li>
          <li @click="tap('v')">
            <a class="key c86"><span>v</span></a>
          </li>
          <li @click="tap('b')">
            <a class="key c66"><span>b</span></a>
          </li>
          <li @click="tap('n')">
            <a class="key c78"><span>n</span></a>
          </li>
          <li @click="tap('m')">
            <a class="key c77"><span>m</span></a>
          </li>
          <li @click="tap(',')">
            <a class="key c188 alt"><b>&lt;</b><span>,</span></a>
          </li>
          <li @click="tap('.')">
            <a class="key c190 alt"><b>&gt;</b><span>.</span></a>
          </li>
          <li @click="tap('?')">
            <a class="key c191 alt"><b>?</b><span>/</span></a>
          </li>
          <li @click="tap('shift')">
            <a class="key c16 shiftright"><span>shift</span></a>
          </li>
        </ul>
        <ul class="cf" id="bottomrow">
          <li @click="tap('fn')">
            <a class="key" id="fn"><span>fn</span></a>
          </li>
          <li @click="tap('control')">
            <a class="key c17" id="control"><span>control</span></a>
          </li>
          <li @click="tap('alt')">
            <a class="key option" id="optionleft"><span>alt</span></a>
          </li>
          <li @click="tap('cmd')">
            <a class="key command" id="commandleft"><span>window</span></a>
          </li>
          <li @click="tap('space')">
            <a class="key c32" id="spacebar"></a>
          </li>
          <li @click="tap('window')">
            <a class="key command" id="commandright"><span>window</span></a>
          </li>
          <li @click="tap('alt')">
            <a class="key option" id="optionright"><span>alt</span></a>
          </li>
          <ol class="cf">
            <li @click="tap('left')">
              <a class="key c37" id="left"><span></span></a>
            </li>
            <li>
              <a @click="tap('up')" class="key c38" id="up"><span></span></a>
              <a @click="tap('down')" class="key c40" id="down"
                ><span></span
              ></a>
            </li>
            <li @click="tap('right')">
              <a class="key c39" id="right"><span></span></a>
            </li>
          </ol>
        </ul>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="./vue.js"></script>
    <script>
      const host = location.host
      const socket = io(host)
      socket.emit('hello-from-browser', 'Hello from browser')
      socket.on('hello-from-server', () => {
        console.log('Socket is connected')
      })
      
    </script>
    <script>
      const app = new Vue({
        el: '#app',
        data: {
          onlyTap: false,
          typedBtns: [],
        },
        methods: {
          tap: function(key) {
            if (this.onlyTap) return socket.emit('tap', { key })

            this.typedBtns.push(key)
          },
          exec: function() {
            if (!this.onlyTap)
              socket.emit('exec', { typedBtns: this.typedBtns })

            this.typedBtns = []
          },
          reset: function() {
            this.typedBtns = []
          },
          enterOnClick: function() {
            if(this.onlyTap) this.tap('enter')
            else this.exec()
          }
        },
      })
    </script>
  </body>
</html>
